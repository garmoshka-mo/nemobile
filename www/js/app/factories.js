var _$_a02c=["Friend","storage","ChatSession","без имени","displayName","name","formatted","emails","value","whenCreated","id","uuid","photos","phoneNumbers","getTime","Friend constructor is called without necessary data","error","prototype","push","factory","$timeout","api","$q","whenExipires","currentChat","creatorId","timer","messages","senderId","isReplied","isExpired","time to live(sec): ","log","parseFromStorage","extraTime","close","setTimeout","chat session expired","warn","handleExpiredChatSession","removeLastChatSession","timer for chatSession is set. Left(msec): ","extra time is added(msec): ","cancel","saveChatSession","then","getTimeDifference","chat session is saved","length","text","match","gif","png","jpeg","jpg",".","split","indexOf","(image)","(link)","success","data","message is sent","type","save","expires","setTimer","currentUser","reject","sendMessage","Chat","title","senderScores","lastUnexpiredChatSession","lastChatSessionIndex","chatSessionsIndexes","chatSessions","isRead","saveChats","getChatSession","nepotomFriends","friendsList","user","phone_number","get chat title error","getUserInfoByUuid","chats","chat is removed","chatSession is sent to archive","chatSession is removed","pop","removeChatSession","remove"];factories[_$_a02c[19]](_$_a02c[70],[_$_a02c[1],_$_a02c[2],_$_a02c[21],_$_a02c[22],function(_,a,c){function $(_,a){this[_$_a02c[28]]=_,this[_$_a02c[76]]={},this[_$_a02c[75]]=[],this[_$_a02c[30]]=!0,this[_$_a02c[29]]=!1,this[_$_a02c[74]]=null,this[_$_a02c[73]]=null,this[_$_a02c[67]]=a,this[_$_a02c[72]]=null,this[_$_a02c[71]]=_}return $[_$_a02c[33]]=function(_,a){var c=new $(_[_$_a02c[28]]);return c[_$_a02c[75]]=_[_$_a02c[75]],c[_$_a02c[30]]=_[_$_a02c[30]],c[_$_a02c[74]]=_[_$_a02c[74]],c[_$_a02c[72]]=_[_$_a02c[72]],c[_$_a02c[77]]=_[_$_a02c[77]],c[_$_a02c[71]]=_[_$_a02c[71]],c[_$_a02c[67]]=a,c},$[_$_a02c[17]]={addChatSession:function(_,c){var $;$=null===this[_$_a02c[74]]?0:this[_$_a02c[74]]+1,this[_$_a02c[74]]=$;var t=new a(_,c,$,this);this[_$_a02c[30]]=!1,this[_$_a02c[75]][_$_a02c[18]]($),this[_$_a02c[76]][$]=t,this[_$_a02c[73]]=t,this[_$_a02c[67]][_$_a02c[78]]()},getChatSessionFromStorage:function(c){return _[_$_a02c[79]](this[_$_a02c[28]],c)[_$_a02c[45]](function(_){return a[_$_a02c[33]](_)})},getLastUnexpiredChatSession:function(){var c=!1,$=this;return this[_$_a02c[30]]?!1:(void 0!==this[_$_a02c[74]]&&(this[_$_a02c[73]]=this[_$_a02c[76]][this[_$_a02c[74]]],c=this[_$_a02c[73]]?!0:!1),void(c||_[_$_a02c[79]](this[_$_a02c[28]],this[_$_a02c[74]])[_$_a02c[45]](function(_){if(_){var c=a[_$_a02c[33]](_,$);$[_$_a02c[73]]=c,$[_$_a02c[76]][$[_$_a02c[74]]]=c,console[_$_a02c[32]]($[_$_a02c[67]])}})))},updateTitle:function(){var _=this;_[_$_a02c[67]][_$_a02c[81]][_$_a02c[80]][_[_$_a02c[28]]]?_[_$_a02c[71]]=_[_$_a02c[67]][_$_a02c[81]][_$_a02c[80]][_[_$_a02c[28]]][_$_a02c[4]]:c[_$_a02c[85]](_[_$_a02c[28]])[_$_a02c[45]](function(a){console[_$_a02c[32]](a),a[_$_a02c[60]]&&(_[_$_a02c[71]]=a[_$_a02c[82]][_$_a02c[5]]?a[_$_a02c[82]][_$_a02c[5]]:a[_$_a02c[82]][_$_a02c[83]])},function(){console[_$_a02c[16]](_$_a02c[84])}),this[_$_a02c[67]][_$_a02c[78]]()},remove:function(){var _=this[_$_a02c[67]][_$_a02c[86]],a={};for(var c in _)this[_$_a02c[28]]!=c&&(a[c]=_[c]);this[_$_a02c[67]][_$_a02c[86]]=a,console[_$_a02c[32]](_$_a02c[87]),this[_$_a02c[67]][_$_a02c[78]]()},handleExpiredChatSession:function(){this[_$_a02c[73]]=null,this[_$_a02c[30]]=!0,console[_$_a02c[32]](_$_a02c[88])},removeLastChatSession:function(){1!==this[_$_a02c[75]][_$_a02c[48]]||this[_$_a02c[29]]||this[_$_a02c[67]][_$_a02c[81]][_$_a02c[80]][this[_$_a02c[28]]]||this[_$_a02c[92]](),_[_$_a02c[91]](this[_$_a02c[28]],this[_$_a02c[74]]),this[_$_a02c[75]][_$_a02c[90]](),this[_$_a02c[73]]=null,this[_$_a02c[30]]=!0,console[_$_a02c[32]](_$_a02c[89])}},$}]),factories[_$_a02c[19]](_$_a02c[2],[_$_a02c[20],_$_a02c[1],_$_a02c[21],_$_a02c[22],function(_,a,c,$){function t(_,a,c,$){this[_$_a02c[30]]=!1,this[_$_a02c[29]]=!1,this[_$_a02c[10]]=c,this[_$_a02c[28]]=a,this[_$_a02c[27]]=[],this[_$_a02c[26]]=null,this[_$_a02c[25]]=_,this[_$_a02c[24]]=$,this[_$_a02c[23]]=1/0}function s(_){var a=(new Date)[_$_a02c[14]]()+e,c=1e3*_-a;return console[_$_a02c[32]](_$_a02c[31]+c/1e3),c}var e;return t[_$_a02c[33]]=function(a,c){var $=new t(a[_$_a02c[25]],a[_$_a02c[28]],a[_$_a02c[10]]);$[_$_a02c[27]]=a[_$_a02c[27]],$[_$_a02c[29]]=a[_$_a02c[29]],$[_$_a02c[34]]=a[_$_a02c[34]],$[_$_a02c[24]]=c,$[_$_a02c[23]]=null===a[_$_a02c[23]]?1/0:a[_$_a02c[23]];var s=$[_$_a02c[23]]-(new Date)[_$_a02c[14]]();return 0>s?($[_$_a02c[30]]=!0,_(function(){$[_$_a02c[35]]()},0)):($[_$_a02c[30]]=!1,$[_$_a02c[36]](s)),$},t[_$_a02c[17]]={close:function(){this[_$_a02c[30]]=!0,this[_$_a02c[29]]?this[_$_a02c[24]][_$_a02c[39]]():this[_$_a02c[24]][_$_a02c[40]](),console[_$_a02c[38]](_$_a02c[37])},setTimeout:function(a){var c=this;console[_$_a02c[32]](_$_a02c[41]+a),a>2147483647&&(this[_$_a02c[34]]=a-2147483647,a=2147483647,console[_$_a02c[32]](_$_a02c[42]+this[_$_a02c[34]])),this[_$_a02c[26]]&&_[_$_a02c[43]](this[_$_a02c[26]]),this[_$_a02c[26]]=_(function(){return c[_$_a02c[34]]>0?(c[_$_a02c[36]](c[_$_a02c[34]]),!1):void c[_$_a02c[35]]()},a)},setTimer:function(_){var $,t=this;e?($=s(_),t[_$_a02c[36]]($),t[_$_a02c[23]]=(new Date)[_$_a02c[14]]()+$):c[_$_a02c[46]]()[_$_a02c[45]](function(c){e=c,$=s(_),t[_$_a02c[36]]($),t[_$_a02c[23]]=(new Date)[_$_a02c[14]]()+$,a[_$_a02c[44]](t)})},setReplied:function(){this[_$_a02c[29]]=!0,this[_$_a02c[24]][_$_a02c[29]]||(this[_$_a02c[24]][_$_a02c[29]]=!0)},save:function(){a[_$_a02c[44]](this,this[_$_a02c[28]]),console[_$_a02c[32]](_$_a02c[47])},getLastMessage:function(){if(this[_$_a02c[27]][_$_a02c[48]]){var _=this[_$_a02c[27]][_$_a02c[48]],a=this[_$_a02c[27]][_-1][_$_a02c[49]];if(a[_$_a02c[50]](/(http|https):/)){var c=[_$_a02c[51],_$_a02c[52],_$_a02c[53],_$_a02c[54]],$=a[_$_a02c[56]](_$_a02c[55]),t=$[$[_$_a02c[48]]-1];return-1!=c[_$_a02c[57]](t)?_$_a02c[58]:_$_a02c[59]}return a}},sendMessage:function(_,a,t){var s=this;return c[_$_a02c[69]](_,a,t)[_$_a02c[45]](function(a){return console[_$_a02c[32]](_$_a02c[62],a),a[_$_a02c[61]][_$_a02c[60]]&&!a[_$_a02c[61]][_$_a02c[63]]?(s[_$_a02c[27]][_$_a02c[48]]||(s[_$_a02c[25]]=s[_$_a02c[24]][_$_a02c[67]][_$_a02c[11]]),s[_$_a02c[27]][_$_a02c[18]]({text:_,isOwn:!0}),s[_$_a02c[66]](a[_$_a02c[61]][_$_a02c[65]]),s[_$_a02c[64]](),console[_$_a02c[32]](_$_a02c[47]),!0):$[_$_a02c[68]](a[_$_a02c[61]][_$_a02c[63]])},function(_){console[_$_a02c[16]](_)})}},t}]),factories[_$_a02c[19]](_$_a02c[0],[_$_a02c[1],_$_a02c[2],function(){function _(_){var a=_$_a02c[3];return _[_$_a02c[4]]?a=_[_$_a02c[4]]:_[_$_a02c[5]]&&(_[_$_a02c[5]][_$_a02c[6]]?a=_[_$_a02c[5]][_$_a02c[6]]:_[_$_a02c[7]]&&(a=_[_$_a02c[7]][0][_$_a02c[8]])),a}function a(a){a?(this[_$_a02c[4]]=_(a),this[_$_a02c[13]]=a[_$_a02c[13]],this[_$_a02c[12]]=a[_$_a02c[12]],this[_$_a02c[11]]=a[_$_a02c[11]],this[_$_a02c[10]]=a[_$_a02c[10]],this[_$_a02c[7]]=a[_$_a02c[7]],this[_$_a02c[9]]=a[_$_a02c[9]]?a[_$_a02c[9]]:(new Date)[_$_a02c[14]]()):console[_$_a02c[16]](_$_a02c[15])}return a[_$_a02c[17]]={setUuid:function(_){this[_$_a02c[11]]=_},addPhoneNumber:function(_){this[_$_a02c[13]][_$_a02c[18]]({value:_})},update:function(a){this[_$_a02c[4]]=_(a),this[_$_a02c[13]]=a[_$_a02c[13]],this[_$_a02c[12]]=a[_$_a02c[12]],this[_$_a02c[7]]=a[_$_a02c[7]]}},a}]);