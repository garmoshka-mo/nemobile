!function(){function e(e,n){window.XMLHttpRequest.prototype[e]=n(window.XMLHttpRequest.prototype[e])}function n(e,n,t,r,i,a,l){function o(e,n,t,r,i,l){for(var o=[],c=0;c<e.length;c++)o.push(e.item(c));t&&(i[n.ngModel]?i[n.ngModel].value=o:i[n.ngModel]=o,t&&t.$setViewValue(null!=o&&0==o.length?"":o)),r&&a(function(){r(i,{$files:o,$event:l})})}t.ngMultiple&&i(t.ngMultiple)(e)&&(n.attr("multiple","true"),t.multiple="true");var c=t.ngAccept&&i(t.ngAccept)(e);if(c&&(n.attr("accept",c),t.accept=c),"input"!==n[0].tagName.toLowerCase()||"file"!==(n.attr("type")&&n.attr("type").toLowerCase())){var u=angular.element('<input type="file">');t.multiple&&u.attr("multiple",t.multiple),t.accept&&u.attr("accept",t.accept),u.css("width","1px").css("height","1px").css("opacity",0).css("position","absolute").css("filter","alpha(opacity=0)").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").attr("ng-file-generated-elem",!0),n.append(u),n.__afu_fileClickDelegate__=function(){u[0].click()},n.bind("click",n.__afu_fileClickDelegate__),n.css("overflow","hidden"),n=u}var f=i(t.ngFileChange);if(0!=i(t.resetOnClick)(e))if(-1!==navigator.appVersion.indexOf("MSIE 10")){var s=function(t){var r=n.clone();r.val(""),n.replaceWith(r),l(r)(e),u=r,n=r,n.bind("change",p),n.unbind("click"),n[0].click(),n.bind("click",s),t.preventDefault(),t.stopPropagation()};n.bind("click",s)}else n.bind("click",function(){n[0].value=null});var p=function(n){var i;i=n.__files_||n.target.files,o(i,t,r,f,e,n)};n.bind("change",p),""!=t.ngFileSelect&&(t.ngFileChange=t.ngFileSelect)}function t(e,n,t,l,o,c,u){function f(e,n,t){var r=!0;if(y){var i=t.dataTransfer.items;if(null!=i)for(var a=0;a<i.length&&r;a++)r=r&&("file"==i[a].kind||""==i[a].kind)&&(null!=i[a].type.match(y)||null!=i[a].name&&null!=i[a].name.match(y))}var l=o(n.dragOverClass)(e,{$event:t});return l&&(l.delay&&(h=l.delay),l.accept&&(l=r?l.accept:l.reject)),l||n.dragOverClass||"dragover"}function s(e,n,t,r){function a(e){!y||e.type.match(y)||null!=e.name&&e.name.match(y)?o.push(e):f.push(e)}function l(e,n,t){if(null!=n)if(n.isDirectory){var r=(t||"")+n.name;a({name:n.name,type:"directory",path:r});var i=n.createReader(),o=[];p++;var c=function(){i.readEntries(function(r){try{if(r.length)o=o.concat(Array.prototype.slice.call(r||[],0)),c();else{for(var i=0;i<o.length;i++)l(e,o[i],(t?t:"")+n.name+"/");p--}}catch(a){p--,console.error(a)}},function(){p--})};c()}else p++,n.file(function(e){try{p--,e.path=(t?t:"")+e.name,a(e)}catch(n){p--,console.error(n)}},function(){p--})}var o=[],f=[],s=e.dataTransfer.items,p=0;if(s&&s.length>0&&"file"!=u.protocol())for(var d=0;d<s.length;d++){if(s[d].webkitGetAsEntry&&s[d].webkitGetAsEntry()&&s[d].webkitGetAsEntry().isDirectory){var g=s[d].webkitGetAsEntry();if(g.isDirectory&&!t)continue;null!=g&&(i(g.name)?l(o,g):s[d].webkitGetAsEntry().isDirectory||a(s[d].getAsFile()))}else{var v=s[d].getAsFile();null!=v&&a(v)}if(!r&&o.length>0)break}else{var h=e.dataTransfer.files;if(null!=h)for(var d=0;d<h.length&&(a(h.item(d)),r||!(o.length>0));d++);}var m=0;!function _(e){c(function(){if(p)10*m++<2e4&&_(10);else{if(!r&&o.length>1){for(var e=0;"directory"==o[e].type;)e++;o=[o[e]]}n(o,f)}},e||0)}()}var p=r();if(t.dropAvailable&&c(function(){e.dropAvailable?e.dropAvailable.value=p:e.dropAvailable=p}),!p)return void(0!=o(t.hideOnDropNotAvailable)(e)&&n.css("display","none"));var d,g=null,v=o(t.stopPropagation)(e),h=1,m=o(t.ngAccept)(e)||t.accept,y=m?new RegExp(a(m)):null;n[0].addEventListener("dragover",function(r){r.preventDefault(),v&&r.stopPropagation(),c.cancel(g),e.actualDragOverClass||(d=f(e,t,r)),n.addClass(d)},!1),n[0].addEventListener("dragenter",function(e){e.preventDefault(),v&&e.stopPropagation()},!1),n[0].addEventListener("dragleave",function(){g=c(function(){n.removeClass(d),d=null},h||1)},!1),""!=t.ngFileDrop&&(t.ngFileChange=e.ngFileDrop),n[0].addEventListener("drop",function(r){r.preventDefault(),v&&r.stopPropagation(),n.removeClass(d),d=null,s(r,function(n,i){l&&(e[t.ngModel]?e[t.ngModel].value=n:e[t.ngModel]=n,l&&l.$setViewValue(null!=n&&0==n.length?"":n)),t.ngFileRejectedModel&&(e[t.ngFileRejectedModel]?e[t.ngFileRejectedModel].value=i:e[t.ngFileRejectedModel]=i),c(function(){o(t.ngFileChange)(e,{$files:n,$rejectedFiles:i,$event:r})})},0!=o(t.allowDir)(e),t.multiple||o(t.ngMultiple)(e))},!1)}function r(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function i(e){return/^[\000-\177]*$/.test(e)}function a(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var n=e.split(","),t="";if(n.length>1)for(var r=0;r<n.length;r++)t+="("+a(n[r])+")",r<n.length-1&&(t+="|");else t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,".");return t}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&e("setRequestHeader",function(e){return function(n,t){if("__setXHR_"===n){var r=t(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}});var l=angular.module("angularFileUpload",[]);l.version="2.1.1",l.service("$upload",["$http","$q","$timeout",function(e,n,t){function r(r){r.method=r.method||"POST",r.headers=r.headers||{},r.transformRequest=r.transformRequest||function(n,t){return window.ArrayBuffer&&n instanceof window.ArrayBuffer?n:e.defaults.transformRequest[0](n,t)};var i=n.defer(),a=i.promise;return r.headers.__setXHR_=function(){return function(e){e&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i.notify?i.notify(e):a.progress_fn&&t(function(){a.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i.notify?i.notify(e):a.progress_fn&&t(function(){a.progress_fn(e)}))},!1))}},e(r).then(function(e){i.resolve(e)},function(e){i.reject(e)},function(e){i.notify(e)}),a.success=function(e){return a.then(function(n){e(n.data,n.status,n.headers,r)}),a},a.error=function(e){return a.then(null,function(n){e(n.data,n.status,n.headers,r)}),a},a.progress=function(e){return a.progress_fn=e,a.then(null,null,function(n){e(n)}),a},a.abort=function(){return r.__XHR&&t(function(){r.__XHR.abort()}),a},a.xhr=function(e){return r.xhrFn=function(n){return function(){n&&n.apply(a,arguments),e.apply(a,arguments)}}(r.xhrFn),a},a}this.upload=function(n){n.headers=n.headers||{},n.headers["Content-Type"]=void 0,n.transformRequest=n.transformRequest||e.defaults.transformRequest;var t=new FormData,i=n.transformRequest,a=n.data;return n.transformRequest=function(e,t){if(a)if(n.formDataAppender)for(var r in a){var l=a[r];n.formDataAppender(e,r,l)}else for(var r in a){var l=a[r];if("function"==typeof i)l=i(l,t);else for(var o=0;o<i.length;o++){var c=i[o];"function"==typeof c&&(l=c(l,t))}void 0!=l&&e.append(r,l)}if(null!=n.file){var u=n.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(n.file))for(var f="[object String]"===Object.prototype.toString.call(u),o=0;o<n.file.length;o++)e.append(f?u:u[o],n.file[o],n.fileName&&n.fileName[o]||n.file[o].name);else e.append(u,n.file,n.fileName||n.file.name)}return e},n.data=t,r(n)},this.http=function(e){return r(e)}}]),l.directive("ngFileSelect",["$parse","$timeout","$compile",function(e,t,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,l,o){n(i,a,l,o,e,t,r)}}}]),l.directive("ngFileDrop",["$parse","$timeout","$location",function(e,n,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,l,o){t(i,a,l,o,e,n,r)}}}]),l.directive("ngNoFileDrop",function(){return function(e,n){r()&&n.css("display","none")}}),l.directive("ngFileDropAvailable",["$parse","$timeout",function(e,n){return function(t,i,a){if(r()){var l=e(a.ngFileDropAvailable);n(function(){l(t)})}}}])}();