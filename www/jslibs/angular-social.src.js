function template(n,t,r){"use strict";return n.replace(/\{([^\}]+)\}/g,function(n,e){return e in t?r?r(t[e]):t[e]:n})}var app=angular.module("ngSocial",[]);app.directive("ngSocialButtons",["$compile","$q","$parse","$http","$location",function(n,t,r,e,i){"use strict";return{restrict:"A",scope:{url:"=",title:"=",description:"=",image:"=",showcounts:"="},replace:!0,transclude:!0,template:'<div class="ng-social-container ng-cloak"><ul class="ng-social" ng-transclude></ul></div>',controller:["$scope","$q","$http",function(n,t,r){var e=function(){return n.url||i.absUrl()},l=this;return this.init=function(n,t,r){r.counter&&l.getCount(n.options).then(function(t){n.count=t})},this.link=function(t){t=t||{};var r=t.urlOptions||{};return r.url=e(),r.title||(r.title=n.title),r.image||(r.image=n.image),r.description||(r.description=n.description||""),l.makeUrl(t.clickUrl||t.popup.url,r)},this.clickShare=function(t,r){if(!t.shiftKey&&!t.ctrlKey){t.preventDefault(),r.track&&"undefined"!=typeof _gaq&&angular.isArray(_gaq)&&_gaq.push(["_trackSocial",r.track.name,r.track.action,n.url]);var e=!0;if(angular.isFunction(r.click)&&(e=r.click.call(this,r)),e){var i=l.link(r);l.openPopup(i,r.popup)}}},this.openPopup=function(n,t){var r=Math.round(screen.width/2-t.width/2),e=0;screen.height>t.height&&(e=Math.round(screen.height/3-t.height/2));var i=window.open(n,"sl_"+this.service,"left="+r+",top="+e+",width="+t.width+",height="+t.height+",personalbar=0,toolbar=0,scrollbars=1,resizable=1");i?i.focus():location.href=n},this.getCount=function(i){var c=t.defer(),a=i.urlOptions||{};a.url=e(),a.title||(a.title=n.title);var s=l.makeUrl(i.counter.url,a),o=angular.isUndefined(n.showcounts)?!0:n.showcounts;return o&&(i.counter.get?i.counter.get(s,c,r):r.jsonp(s).success(function(n){c.resolve(i.counter.getNumber?i.counter.getNumber(n):n)})),c.promise},this.makeUrl=function(n,t){return template(n,t,encodeURIComponent)},this}]}}]),app.directive("ngSocialFacebook",["$parse",function(n){"use strict";var t={counter:{url:"//graph.facebook.com/fql?q=SELECT+total_count+FROM+link_stat+WHERE+url%3D%22{url}%22&callback=JSON_CALLBACK",getNumber:function(n){return 0===n.data.length?0:n.data[0].total_count}},popup:{url:"http://www.facebook.com/sharer/sharer.php?u={url}",width:600,height:500},track:{name:"facebook",action:"send"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li><a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"><span class="ng-social-icon"></span><span class="ng-social-text" ng-transclude></span></a><span ng-show="count" class="ng-social-counter">{{ count }}</span></li>',link:function(r,e,i,l){e.addClass("ng-social-facebook"),l&&(t.urlOptions={url:n(i.url)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),app.directive("ngSocialTwitter",["$parse",function(n){"use strict";var t={counter:{url:"//urls.api.twitter.com/1/urls/count.json?url={url}&callback=JSON_CALLBACK",getNumber:function(n){return n.count}},popup:{url:"http://twitter.com/intent/tweet?url={url}&text={title}",width:600,height:450},click:function(n){return/[\.:\-–—]\s*$/.test(n.pageTitle)||(n.pageTitle+=":"),!0},track:{name:"twitter",action:"tweet"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-twitter"),l&&(t.urlOptions={url:n(i.url)(r),title:n(i.title)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),app.directive("ngSocialGooglePlus",["$parse",function(n){"use strict";var t={counter:{url:"//share.yandex.ru/gpp.xml?url={url}",getNumber:function(n){return n.count},get:function(n,r,e){return t._?void r.reject():(window.services||(window.services={}),window.services.gplus={cb:function(n){t._.resolve(n)}},t._=r,void e.jsonp(n))}},popup:{url:"https://plus.google.com/share?url={url}",width:700,height:500},track:{name:"Google+",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-google-plus"),l&&(t.urlOptions={url:n(i.url)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),app.directive("ngSocialVk",["$parse",function(n){"use strict";var t={counter:{url:"//vkontakte.ru/share.php?act=count&url={url}&index={index}",get:function(n,r,e){t._||(t._=[],window.VK||(window.VK={}),window.VK.Share={count:function(n,r){t._[n].resolve(r)}});var i=t._.length;t._.push(r),e.jsonp(n.replace("{index}",i))}},popup:{url:"http://vk.com/share.php?url={url}&title={title}&description={description}&image={image}",width:550,height:330},track:{name:"VKontakte",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-vk"),l&&(t.urlOptions={url:n(i.url)(r),title:n(i.title)(r),description:n(i.description)(r),image:n(i.image)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),angular.module("ngSocial").directive("ngSocialOdnoklassniki",["$parse",function(n){var t={counter:{url:"http://connect.ok.ru/dk?st.cmd=extLike&ref={url}&uid={index}",get:function(n,r,e){t._||(t._=[],window.ODKL||(window.ODKL={}),window.ODKL.updateCount=function(n,r){t._[n].resolve(r)});var i=t._.length;t._.push(r),e.jsonp(n.replace("{index}",i))}},popup:{url:"http://connect.ok.ru/dk?st.cmd=WidgetSharePreview&service=odnoklassniki&st.shareUrl={url}",width:550,height:360},track:{name:"Odnoklassniki",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-odnoklassniki"),l&&(t.urlOptions={url:n(i.url)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),angular.module("ngSocial").directive("ngSocialMailru",["$parse",function(n){var t={counter:{url:"//connect.mail.ru/share_count?url_list={url}&callback=1&func=JSON_CALLBACK",getNumber:function(n){for(var t in n)if(n.hasOwnProperty(t))return n[t].shares}},popup:{url:"http://connect.mail.ru/share?share_url={url}&title={title}",width:550,height:360}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-mailru"),l&&(t.urlOptions={url:n(i.url)(r),title:n(i.title)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),angular.module("ngSocial").directive("ngSocialPinterest",["$parse",function(n){var t={counter:{url:"//api.pinterest.com/v1/urls/count.json?url={url}&callback=JSON_CALLBACK",getNumber:function(n){return n.count}},popup:{url:"http://pinterest.com/pin/create/button/?url={url}&description={title}&media={image}",width:630,height:270}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-pinterest"),l&&(t.urlOptions={url:n(i.url)(r),title:n(i.title)(r),image:n(i.image)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),angular.module("ngSocial").directive("ngSocialGithubForks",function(){var n={counter:{url:"//api.github.com/repos/{user}/{repository}?callback=JSON_CALLBACK",getNumber:function(n){return n.data.forks_count}},clickUrl:"https://github.com/{user}/{repository}/"};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(t,r,e,i){r.addClass("ng-social-github ng-social-github-forks"),i&&(n.urlOptions={user:e.user,repository:e.repository},t.options=n,t.ctrl=i,i.init(t,r,n))}}}),angular.module("ngSocial").directive("ngSocialGithub",function(){var n={counter:{url:"//api.github.com/repos/{user}/{repository}?callback=JSON_CALLBACK",getNumber:function(n){return n.data.watchers_count}},clickUrl:"https://github.com/{user}/{repository}/"};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(t,r,e,i){r.addClass("ng-social-github"),i&&(n.urlOptions={user:e.user,repository:e.repository},t.options=n,t.ctrl=i,i.init(t,r,n))}}}),app.directive("ngSocialStumbleupon",["$parse",function(n){"use strict";var t={counter:{url:"{proxy}?url={url}&type=stumbleupon&callback=JSON_CALLBACK",getNumber:function(n){return n.count}},popup:{url:"http://www.stumbleupon.com/submit?url={url}&title={title}",width:800,height:600},track:{name:"StumbleUpon",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){if(e.addClass("ng-social-google-plus"),l){t.urlOptions={url:n(i.url)(r),title:n(i.title)(r)};var c=n(i.proxyUrl)(r)||"/proxy.php";t.counter.url=t.counter.url.replace("{proxy}",c),r.options=t,r.ctrl=l,l.init(r,e,t)}}}}]),app.directive("ngSocialMoiKrug",["$parse",function(n){"use strict";var t={popup:{url:"//share.yandex.ru/go.xml?service=moikrug&url={url}&title={title}",width:800,height:600},track:{name:"MoiKrug",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-moi-krug"),l&&(t.urlOptions={url:n(i.url)(r),title:n(i.title)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),app.directive("ngSocialLinkedin",["$parse",function(n){"use strict";var t={counter:{url:"//www.linkedin.com/countserv/count/share?url={url}&format=jsonp&callback=JSON_CALLBACK",getNumber:function(n){return n.count}},popup:{url:"http://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={description}",width:600,height:450},click:function(n){return/[\.:\-–—]\s*$/.test(n.pageTitle)||(n.pageTitle+=":"),!0},track:{name:"LinkedIn",action:"share"}};return{restrict:"C",require:"^?ngSocialButtons",scope:!0,replace:!0,transclude:!0,template:'<li> \r\n                    <a ng-href="{{ctrl.link(options)}}" target="_blank" ng-click="ctrl.clickShare($event, options)" class="ng-social-button"> \r\n                        <span class="ng-social-icon"></span> \r\n                        <span class="ng-social-text" ng-transclude></span> \r\n                    </a> \r\n                    <span ng-show="count" class="ng-social-counter">{{ count }}</span> \r\n                   </li>',link:function(r,e,i,l){e.addClass("ng-social-linkedin"),l&&(t.urlOptions={url:n(i.url)(r),title:n(i.title)(r),description:n(i.description)(r)},r.options=t,r.ctrl=l,l.init(r,e,t))}}}]),angular.module("ngSocial").run(["$templateCache",function(n){n.put("/views/buttons.html",'<div class="ng-social-container ng-cloak"><ul class="ng-social" ng-transclude></ul></div>')}]);